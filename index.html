<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="    viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="./js/signin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="https://kit.fontawesome.com/3e2cc3644f.js" crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <title>Login System</title>
</head>
<style>
    body {
        font-family: 'Kanit', sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
        margin: 0px;
    }
</style>

<body>
    <div class="mb-5" id="main">
        <img src="./img/log.png" width="300" height="300">

        <h1 style="text-align: center;">Admin</h1>
        <input type="email" class="form-control mb-3" placeholder="email here" id="email"><br>
        <input type="password" class="form-control mb-3" placeholder="password here" id="password"><br>
        <!-- <button onclick="signUp()" id="signUp" class="btn btn-outline-primary mb-3 w-100" >SignUp</button> -->
        <button id="signIp" class="btn btn-outline-primary mb-3 w-100">SignIn</button>
        <!-- <button onclick="signOut()" id="signOut" class="btn btn-outline-primary mb-3 w-100">SignOut</button> -->
    </div>


    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyCbdOZp1MfMSkTXl1ZDKIy8m6K32VuttD4",
            authDomain: "stuncity-24791.firebaseapp.com",
            databaseURL: "https://stuncity-24791.firebaseio.com",
            projectId: "stuncity-24791",
            storageBucket: "stuncity-24791.appspot.com",
            messagingSenderId: "281522763629",
            appId: "1:281522763629:web:6f1f883f99307fa3740c64",
            measurementId: "G-4538TQL69P"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const save = document.querySelector("#signIp");

        save.addEventListener("click", function () {
            var email = document.getElementById("email");
            var password = document.getElementById("password");
            firebase.auth().signInWithEmailAndPassword(email.value, password.value)
                .then((userCredential) => {
                    // Signed in
                    var user = userCredential.user;
                    console.log("Document written with ID: ", user);                // ...
                })
                .catch((error) => {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    console.log("Document written with ID: ", errorCode);
                    console.log("Document : ", errorMessage);

                });
        })
        firebase.auth().onAuthStateChanged((user) => {
  if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/firebase.User
    var uid = user.uid;
    // ...
    console.log("Signin ", uid);                // ...
    window.location = "home.html";

  } else {
    // User is signed out
    // ...
    console.log("User is signed out");                // ...

  }
});
    </script>
</body>
</html>